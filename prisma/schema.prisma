generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model MenuCategory {
  menuCategoryId Int        @id @default(autoincrement())
  name           String
  MenuItem       MenuItem[]
}

model MenuItem {
  menuItemId     Int          @id @default(autoincrement())
  price          Float
  name           String
  menuCategoryId Int
  menuCategory   MenuCategory @relation(fields: [menuCategoryId], references: [menuCategoryId])
  orderItem      OrderItem[]
}

model Order {
  orderNumber Int         @id @default(autoincrement())
  received    Int?
  tableNumber Int
  createdAt   DateTime?   @db.Timestamptz(6)
  table       Table       @relation(fields: [tableNumber], references: [tableNumber])
  orderItems  OrderItem[]
}

model OrderItem {
  quantity    Int
  orderNumber Int      @default(autoincrement())
  menuItemId  Int
  menuItem    MenuItem @relation(fields: [menuItemId], references: [menuItemId])
  order       Order    @relation(fields: [orderNumber], references: [orderNumber])

  @@id([menuItemId, orderNumber])
}

model Table {
  tableNumber       Int                 @id @default(autoincrement())
  tableSeats        TableSeats
  tableAvailability TableAvailabilities
  orders            Order[]
}

enum TableAvailabilities {
  Available
  Occupied
}

enum TableSeats {
  Two  @map("2")
  Four @map("4")
  Six  @map("6")
}
